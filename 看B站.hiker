{"last_chapter_rule":"js:\nvar chp = [];\ntry {\n    var html = fetch(MY_URL.replace('hiker://empty##',''));\n    var conts = parseDomForArray(html, 'body&&#hl-plays-list');\n    for (var i = 0; i < conts.length; i++) {\n        var list = pdfa(conts[i], 'body&&li');\n        chp.push(list.length-1);\n    }     \n} catch (e) {}\nsetResult('更新至:' + (Math.max.apply(null, chp)));","pageList":[],"title":"看B站","author":"梦之尘","version":3063016,"type":"video","url":"hiker://empty##https://kanb.tv/Show/bilibiliKKKKKKKKfypageKKK.html","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\nvar getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\nconst 下一页 = \"pd(html, 'a:matches(下一页)&&href')\";\nconst page = MY_PAGE;\neval(JSON.parse(request('hiker://page/yi?rule=α')).rule)\n\nvar 定位信息 = [{\n    大类定位: 'body&&.hl-nav&&li:not(:matches(首页|回家地址|影评资讯|明星库|看福利|专题|留言|看B站APP|排行|最新))',\n  \n    链接处理:(u)=>{\n    let url=u.replace(/\\/(\\w+)K.html$/,'/$1').replace('Category','Show')+'KKKKKKKK'+page+'KKK.html';\n        return url\n    },\n},{\n    一级定位: 'body&&.hl-navswiper,2:7',\n\n\n}]\n\n\nMY_URL = MY_URL.replace('hiker://empty##', '')\nlet true_url = getTruelink(MY_RULE.url, MY_URL, page);\n//log(true_url)\n\nvar html = request(true_url)\nconst dc = dynamicClass({\n    分类颜色: getRangeColors()\n});\ndc.创建动态分类(定位信息)\n\nvar parseRule = {\n    list: 'body&&.hl-vod-list&&li', //统一item\n    title: 'a&&title',\n    desc: 'span&&Text',\n    img: 'a&&data-original',\n    url: 'a&&href',\n    ref: '@Referer=',\n    imt: true,\n    //backimg: true,\n}\n\nCreate.List(d, html, parseRule);\nautoPage();\n\nsetResult(d)","searchFind":"js:\nvar d = [];\n\nvar list = pdfa(getResCode(), '.hl-one-list&&li')\n//log(list)\nlist.forEach(data => {\n    d.push({\n        title: pdfh(data, '.hl-item-title&&Text'),\n        desc: pdfh(data, '.hl-item-sub&&Text'),\n        content: pdfh(data, 'p,2&&Text'),\n        img: pd(data, 'a&&data-original') + '@Referer=',\n        url: pd(data, 'a&&href') + \"#immersiveTheme#\",\n    })\n})\nsetResult(d)","search_url":"https://kanb.tv/Videosearch/**KKKKKKKKKKfypageKKK.html","group":"#1视频","detail_col_type":"movie_1","detail_find_rule":"js:\nvar d = [];\n\nMY_URL=MY_URL.replace('hiker://empty##','');\nvar html = fetch(MY_URL);\n\nd.push({\n     title: pdfh(html, '.hl-full-box&&li,4&&Text') +\n        '\\n' + pdfh(html, 'body&&.hl-full-box&&li:contains(地区)&&Text'),\n    desc: pdfh(html, 'body&&.hl-full-box&&li:contains(导演)&&Text') + '\\n' \n+ pdfh(html, 'body&&.hl-full-box&&li:contains(编剧)&&Text').substr(0,20)+ '\\n' \n+ pdfh(html, 'body&&.hl-full-box&&li:contains(主演)&&Text'),\n    img: pd(html, '.hl-lazy&&data-original'),\n    url: MY_URL,\n    col_type: 'movie_1_vertical_pic_blur'\n});\n\n\n//简介\nvar desc = pdfh(html, 'body&&.hl-full-box&&li:contains(简介)&&Text').replace('简介：','');\n\neval(JSON.parse(request('hiker://page/er618?rule=α')).rule);\n\n\n\nfunction setDesc(arr, desc) {\n    function cutstr(str, len) {\n        var str_length = 0;\n        var str_len = 0;\n        str_cut = new String();\n        str_len = str.length;\n        for (var i = 0; i < str_len; i++) {\n            a = str.charAt(i);\n            str_length++;\n            if (escape(a).length > 4) {\n                //中文字符的长度经编码之后大于4\n                str_length++;\n            }\n            str_cut = str_cut.concat(a);\n            if (str_length >= len) {\n                //达到目标长度，即为字符串加上省略号并返回\n                str_cut = str_cut.concat(\"...\");\n                return str_cut;\n            }\n        }\n        //如果字符串长度小于需要裁切的长度，直接返回\n        if (str_length < len) {\n            return str;\n        }\n    }\n    desc=desc.constructor==Array?desc.join(''):desc;\n    if (desc.replace(/(<br>|\\s+)/g, '').length == 0) {\n        return\n    }\n    desc = desc.startsWith('　　') ? desc : '　　' + desc;\n    desc = '<small>' + desc + '</small>';\n    let sdesc = cutstr(desc, 111);\n    arr.push({\n        title: '剧情简介<span style=\"color:#ff0000;\"><b><small>' + storage0.getItem('dshow', '展开') + '</small></b></span>:',\n        col_type: 'avatar',\n        img: 'https://hikerfans.com/tubiao/system/75.png',\n        url: $('#noLoading#').lazyRule((dc, sdc) => {\n            var ds = storage0.getItem('dshow', '展开');\n            var title = findItem('dshow').title;\n            if (ds == '展开') {\n                storage0.setItem('dshow', '收起')\n                updateItem('dcontent', {\n                    title: dc,\n                });\n\n                updateItem('dshow', {\n                    title: title.replace('展开', '收起')\n                });\n\n                updateItem\n            } else {\n                storage0.setItem('dshow', '展开')\n                updateItem('dcontent', {\n                    title: sdc,\n                });\n\n                updateItem('dshow', {\n                    title: title.replace('收起', '展开')\n                });\n            }\n            return 'hiker://empty'\n        }, desc, sdesc),\n        extra: {\n            id: 'dshow',\n        }\n    })\n    arr.push({\n        title: storage0.getItem('dshow', '展开') == '展开' ? sdesc : desc,\n        col_type: 'rich_text',\n        extra: {\n            id: 'dcontent',\n        }\n    })\n}\n\nsetDesc(d, desc);\n\nfunction countChars(str) {\n    const chineseRegex = /[\\u4e00-\\u9fa5]/g; // 匹配中文字符\n    const englishRegex = /[a-zA-Z]/g; // 匹配英文字符\n    const numberRegex = /\\d/g; //匹配数字\n    const chineseCount = (str.match(chineseRegex) || []).length;\n    const englishCount = (str.match(englishRegex) || []).length;\n    const numberCount = (str.match(numberRegex) || []).length;\n    return {\n        chineseCount,\n        englishCount,\n        numberCount,\n    };\n}\n\n\n\nvar lazy=$(\"\").lazyRule(() => {\n    var player = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1]);\n    var jsurl = player.url;\n    if (player.encrypt == '1') {\n        var jsurl = unescape(jsurl);\n    } else if (player.encrypt == '2') {\n        var jsurl = unescape(base64Decode(jsurl));\n    } else {\n        jsurl\n    };\n    var from = player.from;\n    if (jsurl.search(/m3u8|mp4/) > -1) {\n        var video = jsurl\n    } else {\n        var play = input;\n        showLoading(\"网页嗅探中,请稍后...\");\n        var video = 'x5Rule://' + play + '@' + $.toString(() => {\n            var urls = _getUrls()\n            for (var i in urls) {\n                if (!urls[i].includes(\"v=\") && !urls[i].includes(\"url=\") && urls[i].match(/\\.mp4|\\.m3u8/)) {\n                    //fy_bridge_app.log(urls[i])\n                    return urls[i];\n                } else if (urls[i].match(/\\.flv/)) {\n                    //fy_bridge_app.log(urls[i])\n                    return urls[i] + ';{Referer@https://www.bilibili.com/&&User-Agent@Mozilla/5.0}';\n                }\n            }\n        })\n    }\n    return video\n}); \n//线路，所有选集列表，线路名，单线路所有集数\n\nvar 线路 = 'body&&.hl-plays-wrap&&a'\nvar 选集 = 'body&&#hl-plays-list'\nvar 线路名 = 'Text'\nvar 选集列表 = 'body&&a:not(:matches(展开全部))'\n\n\nvar playlist = [{\n    类型: '播放列表',\n    线路: 'body&&.hl-plays-wrap&&a',\n    选集:  'body&&#hl-plays-list',\n    线路名称: 'Text@@.replace(\"\",\"\")',\n    选集列表: 'body&&a:not(:matches(展开全部))',\n    排除: '',\n    //选集名称: 'a&&Text',\n    //选集链接: '',\n    解析: lazy\n}]\n\nErji.getPlayers(playlist, 2);\n\nsetResult(d)\n","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"if (request('hiker://home@α') == 'null') {\r\n    confirm({\r\n        title: '依赖检测',\r\n        content: '检测到缺少小程序,请导入!',\r\n        confirm: () => {\r\n            return \"海阔视界首页频道规则【α】￥home_rule_url￥http://hiker.nokia.press/hikerule/rulelist.json?id=6417\"\r\n        }\r\n    })\r\n}","pages":"[]","proxy":"","icon":"https://kanb.tv/favicon.ico"}