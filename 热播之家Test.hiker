{"last_chapter_rule":"js:\nvar chp = [];\ntry {\n    var html = getResCode();\n    var conts = parseDomForArray(html, 'body&&.stui-content__playlist');\n    for (var i = 0; i < conts.length; i++) {\n        var list = pdfa(conts[i], 'body&&li');\n        chp.push(list.length);\n    }     \n} catch (e) {}\nsetResult('更新至:' + (Math.max.apply(null, chp)));","pageList":[{"col_type":"movie_3","name":"动态","path":"dt","rule":"const empty = \"hiker://empty\"\n\nif (typeof(拼接分类) != 'undefined' && 拼接分类 != '') {\n    var categories = pdfa(html, 大类定位).concat(pdfa(html, 拼接分类))\n} else {\n    var categories = pdfa(html, 大类定位)\n}\n\nlet init_cate = []\n\nfor (let i = 0; i < 20; i++) {\n    init_cate.push(\"0\")\n}\n\nconst fold = getVar(MY_RULE.group, \"0\")\nconst cate_temp_json = getVar(MY_RULE.title, JSON.stringify(init_cate))\nconst cate_temp = JSON.parse(cate_temp_json)\n\nif (parseInt(page) === 1) {\n    d.push({\n        title: fold === '1' ? '““””<b>' + '∨'.fontcolor(\"#FF0000\") + '</b>' : '““””<b>' + '∧'.fontcolor(\"#1aad19\") + '</b>',\n        url: $().lazyRule((fold) => {\n            putVar(MY_RULE.group, fold === '1' ? '0' : '1');\n            refreshPage(false);\n            return \"hiker://empty\"\n        }, fold),\n        col_type: 'scroll_button',\n    })\n    categories.forEach((category, index) => {\n        let sub_categories = pdfa(category, 小类定位);\n        if (index === 0) {\n            sub_categories.forEach((item, key) => {\n                let title = pdfh(item, 分类标题)\n                if (typeof(排除) != 'undefined' && 排除 != '') {\n                    title = title.replace(new RegExp(排除, \"g\"), \"\")\n                }\n                d.push({\n                    title: key.toString() === cate_temp[index] ? \"““””\" + title.fontcolor(分类颜色) : title,\n                    url: $(pd(item, 分类链接) + '#noLoading#').lazyRule((params) => {\n                        let new_cate = []\n                        params.cate_temp.forEach((cate, index) => {\n                            new_cate.push(index === 0 ? params.key.toString() : \"0\")\n                        })\n                        putVar(MY_RULE.title, JSON.stringify(new_cate))\n                        putVar(MY_RULE.url, input)\n                        refreshPage(true)\n                        return \"hiker://empty\"\n                    }, {\n                        cate_temp: cate_temp,\n                        key: key,\n                        page: page,\n                    }),\n                    col_type: 'scroll_button',\n                })\n            })\n            d.push({\n                col_type: \"blank_block\"\n            });\n        } else if (fold === '1') {\n            sub_categories.forEach((item, key) => {\n                let title = pdfh(item, 分类标题)\n                if (typeof(排除) != 'undefined' && 排除 != '') {\n                    title = title.replace(new RegExp(排除, \"g\"), \"\")\n                }\n                d.push({\n                    title: key.toString() === cate_temp[index] ? \"““””\" + title.fontcolor(分类颜色) : title,\n                    url: $(pd(item, 分类链接) + '#noLoading#').lazyRule((params) => {\n                        params.cate_temp[params.index] = params.key.toString()\n\n                        putVar(MY_RULE.title, JSON.stringify(params.cate_temp))\n                        putVar(MY_RULE.url, input)\n                        refreshPage(true)\n                        return \"hiker://empty\"\n                    }, {\n                        cate_temp: cate_temp,\n                        index: index,\n                        key: key,\n                        page: page,\n                    }),\n                    col_type: 'scroll_button',\n                })\n            })\n            d.push({\n                col_type: \"blank_block\"\n            });\n        }\n    })\n}"}],"title":"热播之家Test","author":"发粪涂墙&α😶&梦之尘","version":23060417,"type":"video","url":"hiker://empty##https://rebozj.pro/type/1-fypage.html","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\n//https://wandou.la/\n//www.rebozj.vip//备用地址\nvar d = [];\n\nvar getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\nconst 分类颜色 = getRangeColors()\nconst 大类定位 = '.stui-header__menu'\nconst 拼接分类 = '#screenbox&&ul'\nconst 小类定位 = 'body&&a:not(:matches(首|专题))'\nconst 分类标题 = 'a&&Text'\nconst 分类链接 = 'a&&href'\nMY_URL = MY_URL.replace('hiker://empty##', '')\n\nlet true_url = getVar(MY_RULE.url, MY_URL)\n//log(true_url)\nconst page = MY_PAGE\n\nif(true_url.includes('type')){\n    //true_url=true_url.replace(/.*(\\d+).*/g,MY_HOME+'/show/$1--------'+page+'---.html');\ntrue_url=true_url.replace(/.*type(\\/\\d+).*/g,MY_HOME+'/type$1-'+page+'.html');\n}\nelse{\ntrue_url=true_url.replace(/(\\d+)?---(\\d+)?\\.html/, page + '---$2' + '.html');\n         }\n//log(true_url)\n\n\nvar html = request(true_url)\nrequire('hiker://page/dt')\nconst list = pdfa(html, '.stui-vodlist&&li')\nlist.forEach(video => {\n    d.push({\n        title: pdfh(video, 'h4&&Text'),\n        desc: pdfh(video, '.pic-text&&Text'),\n        img: pd(video, '.lazyload&&data-original'),\n        url: pd(video, 'a&&href') + '#immersiveTheme#',\n        col_type: 'movie_3_marquee',\n    })\n})\nsetResult(d);","searchFind":"js:\nvar d = [];\nvar html = getResCode()\n//log(html)\neval(JSON.parse(request('hiker://page/yzm?rule=模板·Q')).rule) //过验证码\npdfa(html, 'body&&.col-md-6').forEach(video => {\n    d.push({\n        title: pdfh(video, 'h4&&Text'),\n        \n\n        img: pd(video, '.lazyload&&data-original'),\n        url: pd(video, 'a&&href') + '#immersiveTheme#',\n        desc: pdfh(video, '.pic-text1&&Text'),\n        content: pdfh(video, '.pic-text&&Text')\n    })\n})\nsetResult(d)","search_url":"/search/**----------fypage---.html","group":"#1视频","detail_col_type":"movie_1","detail_find_rule":"js:\nvar d = [];\nlet window = {\n    location: {\n        href: MY_URL,\n    },\n};\n\neval(pdfh(fetch(MY_URL), 'script&&Html'));\n\nvar url = window.location.href;\nvar html = fetch(url);\n//log(html)\n\nvar contents = pdfa(html, '.stui-content__detail&&.data,2:7');\n\n//log(contents)\nconst sortOrder = ['地区', '语言', '年份', '导演', '主演'];\nvar array = contents.map(x => pdfh(x, 'Text')).sort((a, b) => {\n    const indexA = sortOrder.indexOf(a.substr(0, 2));\n    const indexB = sortOrder.indexOf(b.substr(0, 2));\n    return indexA - indexB;\n});\n//log(array)\nvar desc = pdfa(html, '.detail-content:matchText');\nvar latest = pdfa(html, '.stui-content__detail&&span,0&&:matchText');\n//log(latest)\nfunction small(str) {\n    return '““””<small>' + str + '<small>';\n}\n\nd.push({\n    title: latest + '\\n' + small(array.slice(0, 2).join('\\n')),\n    desc: array.slice(2).join('\\n') ,\n    pic_url: pd(html, '.lazyload&&data-original'),\n    url: url,\n    col_type: 'movie_1_vertical_pic_blur',\n})\n\nfunction setDesc(arr, desc) {\n    function cutstr(str, len) {\n        var str_length = 0;\n        var str_len = 0;\n        str_cut = new String();\n        str_len = str.length;\n        for (var i = 0; i < str_len; i++) {\n            a = str.charAt(i);\n            str_length++;\n            if (escape(a).length > 4) {\n                //中文字符的长度经编码之后大于4\n                str_length++;\n            }\n            str_cut = str_cut.concat(a);\n            if (str_length >= len) {\n                //达到目标长度，即为字符串加上省略号并返回\n                str_cut = str_cut.concat(\"...\");\n                return str_cut;\n            }\n        }\n        //如果字符串长度小于需要裁切的长度，直接返回\n        if (str_length < len) {\n            return str;\n        }\n    }\n    desc = desc.join('<br>');\n    if (desc.replace(/(<br>|\\s+)/g, '').length == 0) {\n        return\n    }\n    desc = '<small>' + desc + '</small>';\n    let sdesc = cutstr(desc, 100);\n    arr.push({\n        title: '剧情简介<span style=\"color:#ff0000;\"><b><small>' + storage0.getItem('dshow', '收起') + '</small></b></span>:',\n        col_type: 'avatar',\n        img: 'hiker://images/icon_star_fill_red',\n        url: $('#noLoading#').lazyRule((dc, sdc) => {\n            var ds = storage0.getItem('dshow', '收起');\n            var title = findItem('dshow').title;\n            if (ds == '收起') {\n                storage0.setItem('dshow', '展开')\n                updateItem('dcontent', {\n                    title: dc,\n                });\n\n                updateItem('dshow', {\n                    title: title.replace('收起', '展开')\n                });\n\n                updateItem\n            } else {\n                storage0.setItem('dshow', '收起')\n                updateItem('dcontent', {\n                    title: sdc,\n                });\n\n                updateItem('dshow', {\n                    title: title.replace('展开', '收起')\n                });\n            }\n            return 'hiker://empty'\n        }, desc, sdesc),\n        extra: {\n            id: 'dshow',\n        }\n    })\n    arr.push({\n        title: storage0.getItem('dshow', '收起') == '收起' ? sdesc : desc,\n        col_type: 'rich_text',\n        extra: {\n            id: 'dcontent',\n        }\n    })\n}\n\nsetDesc(d, desc);\n\nfunction countChars(str) {\n    const chineseRegex = /[\\u4e00-\\u9fa5]/g; // 匹配中文字符\n    const englishRegex = /[a-zA-Z]/g; // 匹配英文字符\n    const numberRegex = /\\d/g; //匹配数字\n    const chineseCount = (str.match(chineseRegex) || []).length;\n    const englishCount = (str.match(englishRegex) || []).length;\n    const numberCount = (str.match(numberRegex) || []).length;\n    return {\n        chineseCount,\n        englishCount,\n        numberCount,\n    };\n}\n\n\n\n/*var lazy = $('').lazyRule(() => {\n    var html = fetch(input);\n    var json = {};\n    var s = eval(pdfh(html, 'script:containsData(player_aaa)&&Html'))\n    try {\n        json = JSON.parse(s);\n        var url = json.url\n        if (json.encrypt == '1') {\n            url = unescape(url);\n        } else if (json.encrypt == '2') {\n            url = unescape(base64Decode(url));\n        }\n        if (/m3u8|mp4/.test(url)) {\n            return url\n        }\n    } catch {\n        return 'video://' + input;\n    }\n})*/\n\n\n\nvar 线路 = 'body&&h4'\nvar 选集 = 'body&&.stui-content__playlist'\nvar 线路名 = 'Text'\nvar 选集列表 = 'body&&.stui-content__playlist&&a'\n\nvar tabs = pdfa(html, 线路).map(x => pdfh(x, 线路名));\nvar lists = pdfa(html, 选集).map(x => pdfa(x, 选集列表));\n\nfunction setTabs(tabs, vari) {\n    d.push({\n        title: (getVar('shsort') == '1') ? '““””<b><span style=\"color: #FF0000\">逆序</span></b>' : '““””<b><span style=\"color: #1aad19\">正序</span></b>',\n        url: `@lazyRule=.js:let conf = getVar('shsort');if(conf=='1'){putVar({key:'shsort', value:'0'});}else{putVar({key:'shsort', value:'1'})};refreshPage();'toast://切换排序成功'`,\n        col_type: 'flex_button'\n    })\n    for (var i = 0; i < tabs.length-12; i++) {\n        var url = \"#noLoading#@lazyRule=.js:putVar('\" + vari + \"', '\" + i + \"');refreshPage(false);'toast://切换成功！';'#noHistory#hiker://empty'\";\n        d.push({\n            title: getVar(vari, '0') == i ? '““' + tabs[i] + '””' : tabs[i],\n            url: url,\n            col_type: 'flex_button'\n        })\n    }\n}\n\nfunction setLists(lists, index) {\n    var list = lists[index];\n    if (getVar('shsort') == '1') {\n        var list = lists[index].reverse();\n    }\n    for (var j in list) {\n        var title = pdfh(list[j], 'a&&Text');\n        var n=countChars(title)\n        var ct=n.chineseCount>4||(n.numberCount+n.chineseCount>8||n.englishCount+n.chineseCount>8)?'text_3':'text_4';\n        \n\n\n        d.push({\n            title: pdfh(list[j], 'a&&Text')\n                .replace(/第(\\d+)集/, '$1')\n                .replace('第', '')\n                .replace('期', ''),\n          /*  url: pd(list[j], 'a&&href') + lazy.replace('https://rebozj.pro/m3u8/?url=',''),*/\nurl:$(pd(list[j], 'a&&href')).lazyRule(() => {\n        var url = '';\n        var html = fetchPC(input, {\n            headers: {\n                cookie: getVar('ck', 'filter_robot_dd=301')\n            }\n        });\n        if (/player_aaaa/.test(html)) {\n            var html = JSON.parse(html.match(/r player_aaaa.*?=(.*?)</)[1]);\n            var url_t = html.url;\nlog('url_t>>>>'+url_t)\n            if (html.encrypt == '1') {\n                 url_t = unescape(url_t);\nlog('url_t>>11>>'+url_t)\n            } else if (html.encrypt == '2') {\n                url_t = unescape(base64Decode(url_t));\n            }\n            if(/m3u8|mp4|flv/.test(url_t)) {\n                url = url_t;\n            }else if(/qq|qiyi|youku|mgtv|bili/.test(url_t)) {\n                url = 'video://https://jx.xmflv.com/?url=' + url_t;\n            }else if(/bfzym3u8|rrys/.test(url_t)) {\n                url = 'video://https://zyone.vqyt.cn/player/?url=' + url_t;\n            } else {\n                url = 'video://https://rebozj.pro/m3u8/?url=' + url_t;\n            }\n        } else {\n            url = 'video://' + input;\n        }\n        return url;\n    }),\n\n            col_type: list.length > 3 ? ct : 'text_2'\n        });\n    }\n}\n\nsetTabs(tabs, MY_URL);\nsetLists(lists, getVar(MY_URL, '0'));\n\n\nsetResult(d)","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"动态\",\"path\":\"dt\",\"rule\":\"const empty = \\\"hiker://empty\\\"\\n\\nif (typeof(拼接分类) != 'undefined' && 拼接分类 != '') {\\n    var categories = pdfa(html, 大类定位).concat(pdfa(html, 拼接分类))\\n} else {\\n    var categories = pdfa(html, 大类定位)\\n}\\n\\nlet init_cate = []\\n\\nfor (let i = 0; i < 20; i++) {\\n    init_cate.push(\\\"0\\\")\\n}\\n\\nconst fold = getVar(MY_RULE.group, \\\"0\\\")\\nconst cate_temp_json = getVar(MY_RULE.title, JSON.stringify(init_cate))\\nconst cate_temp = JSON.parse(cate_temp_json)\\n\\nif (parseInt(page) === 1) {\\n    d.push({\\n        title: fold === '1' ? '““””<b>' + '∨'.fontcolor(\\\"#FF0000\\\") + '</b>' : '““””<b>' + '∧'.fontcolor(\\\"#1aad19\\\") + '</b>',\\n        url: $().lazyRule((fold) => {\\n            putVar(MY_RULE.group, fold === '1' ? '0' : '1');\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\"\\n        }, fold),\\n        col_type: 'scroll_button',\\n    })\\n    categories.forEach((category, index) => {\\n        let sub_categories = pdfa(category, 小类定位);\\n        if (index === 0) {\\n            sub_categories.forEach((item, key) => {\\n                let title = pdfh(item, 分类标题)\\n                if (typeof(排除) != 'undefined' && 排除 != '') {\\n                    title = title.replace(new RegExp(排除, \\\"g\\\"), \\\"\\\")\\n                }\\n                d.push({\\n                    title: key.toString() === cate_temp[index] ? \\\"““””\\\" + title.fontcolor(分类颜色) : title,\\n                    url: $(pd(item, 分类链接) + '#noLoading#').lazyRule((params) => {\\n                        let new_cate = []\\n                        params.cate_temp.forEach((cate, index) => {\\n                            new_cate.push(index === 0 ? params.key.toString() : \\\"0\\\")\\n                        })\\n                        putVar(MY_RULE.title, JSON.stringify(new_cate))\\n                        putVar(MY_RULE.url, input)\\n                        refreshPage(true)\\n                        return \\\"hiker://empty\\\"\\n                    }, {\\n                        cate_temp: cate_temp,\\n                        key: key,\\n                        page: page,\\n                    }),\\n                    col_type: 'scroll_button',\\n                })\\n            })\\n            d.push({\\n                col_type: \\\"blank_block\\\"\\n            });\\n        } else if (fold === '1') {\\n            sub_categories.forEach((item, key) => {\\n                let title = pdfh(item, 分类标题)\\n                if (typeof(排除) != 'undefined' && 排除 != '') {\\n                    title = title.replace(new RegExp(排除, \\\"g\\\"), \\\"\\\")\\n                }\\n                d.push({\\n                    title: key.toString() === cate_temp[index] ? \\\"““””\\\" + title.fontcolor(分类颜色) : title,\\n                    url: $(pd(item, 分类链接) + '#noLoading#').lazyRule((params) => {\\n                        params.cate_temp[params.index] = params.key.toString()\\n\\n                        putVar(MY_RULE.title, JSON.stringify(params.cate_temp))\\n                        putVar(MY_RULE.url, input)\\n                        refreshPage(true)\\n                        return \\\"hiker://empty\\\"\\n                    }, {\\n                        cate_temp: cate_temp,\\n                        index: index,\\n                        key: key,\\n                        page: page,\\n                    }),\\n                    col_type: 'scroll_button',\\n                })\\n            })\\n            d.push({\\n                col_type: \\\"blank_block\\\"\\n            });\\n        }\\n    })\\n}\"}]","proxy":"","icon":"https://rebozj.pro/template/jianhei/statics/img/newfavicon.png"}